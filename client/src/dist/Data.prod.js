"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _config=_interopRequireDefault(require("./config"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}var Data=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"api",value:function(e,r,t,n,a){var u=1<arguments.length&&void 0!==r?r:"GET",s=2<arguments.length&&void 0!==t?t:null,o=3<arguments.length&&void 0!==n&&n,i=4<arguments.length&&void 0!==a?a:null,c=_config.default.apiBaseUrl+e,l={method:u,headers:{"Content-Type":"application/json; charset=utf-8"}};if(null!==s&&(l.body=JSON.stringify(s)),o){var f=btoa("".concat(i.username,":").concat(i.password));l.headers.Authorization="Basic ".concat(f)}return fetch(c,l)}},{key:"getUser",value:function(r,t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.api("/users","GET",null,!0,{username:r,password:t}));case 2:if(200===(n=e.sent).status)return e.abrupt("return",n.json().then(function(e){return e}));e.next=7;break;case 7:if(401===n.status)return e.abrupt("return",null);e.next=11;break;case 11:throw new Error;case 12:case"end":return e.stop()}},null,this)}},{key:"createUser",value:function(r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.api("/users","POST",r));case 2:if(201===(t=e.sent).status)return e.abrupt("return",[]);e.next=7;break;case 7:if(400===t.status)return e.abrupt("return",t.json().then(function(e){return e.errors}));e.next=11;break;case 11:throw new Error;case 12:case"end":return e.stop()}},null,this)}}]),e}();exports.default=Data;